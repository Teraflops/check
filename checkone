version: v1

tasks:
  - ref: java-maven-build
    name: java11-build
    params:
      - name: jdk-version
        value: "11"
      - name: context-dir
        value: "./AdditionalTransform"
      - name: goals
        value:
          - clean
          - package

  - ref: java-maven-build
    name: java17-build
    params:
      - name: jdk-version
        value: "17"
      - name: context-dir
        value: "./AdditionalTransform"
      - name: goals
        value:
          - clean
          - package

  - ref: ansible-distribution-publish
    name: jar-publish
    params:
      - name: source-file-path
        value: "./AdditionalTransform/target/nextgen-citidirect-3.0.1.jar"  # update if different
      - name: artifact-name
        value: "nextgen-citidirect-3.0.1.jar"
    runAfter:
      - java11-build

  - ref: ansible-distribution-publish
    name: jar17-publish
    params:
      - name: source-file-path
        value: "./AnotherTransform/target/nextgen-citidirect-3.0.1.jar"      # update if different
      - name: artifact-name
        value: "nextgen-citidirect-3.0.1.jar"
    runAfter:
      - java17-build
